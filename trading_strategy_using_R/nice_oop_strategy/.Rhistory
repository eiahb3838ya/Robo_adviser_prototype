##### ........... =====
###### packages =====
packages_list <- list(
"PerformanceAnalytics",
"quantmod",
"timeSeries",
"fUnitRoots",
"fPortfolio",
"CVXR",
"data.table",
"tidyverse",
"tidyquant",
"plotly"
)
lapply(packages_list, function(idx){
install.packages(idx)
})
library(PerformanceAnalytics)
library(quantmod)
library(timeSeries)
library(fUnitRoots)
library(fPortfolio)
library(CVXR)
library(data.table)
library(tidyverse)
library(plotly)
##### ........... =====
##### Input =====
input <- list()
input$listID <- "2330"
# periodn = "Day"
# periodn = "Week"
# periodn = "Month"
# periodn = "Quarter"
# periodn = "Year"
input$period <- "Quarter"
input$StartDate <-  "2007-01-02"
input$EndDate <-  "2019-06-28"
setwd("C:/Users/Evan/Desktop/xiqi/Robo_adviser_prototype/trading_strategy_using_R/nice_oop_strategy")
##### ........... =====
##### Source =====
pathis <- "C:/Users/Evan/Desktop/xiqi/Robo_adviser_prototype/trading_strategy_using_R/nice_oop_strategy/"
files <- list.files(path = paste0(pathis,"server/"),pattern = "\\.R")
lapply(files, function(idx){
source(paste0("server/", idx))
})
##### ........... =====
##### DataTable =====
RDS <- "SQLDB_TW_20190711.RDS"
readDataFrame <- readRDS(file = paste0(pathis,RDS))
View(readDataFrame)
View(readDataFrame)
readDataFrame
DataTable <- getDT_FromSQL(readDataFrame)
View(DataTable)
View(DataTable)
##### ........... =====
##### WinDT =====
Win_DT <- getWin_DT(DataTable, SelectCol = "Close", StartDate = input$StartDate, EndDate = input$EndDate)
View(Win_DT)
##### ........... =====
##### Select_DT =====
Select_DT <- getSelect_DT(Win_DT, input$listID)
##### ........... =====
##### Info =====
Ret_DT <- getRet_DT(Select_DT)
View(Ret_DT)
View(Ret_DT)
View(Ret_DT)
CumRet_DT <- getCumRet_DT(Ret_DT)
## CumRet_Plotly
CumRet_Plotly <- getPloty(CumRet_DT)
View(CumRet_Plotly)
View(CumRet_DT)
plot_ly(CumRet_Plotly, x = ~index, y = ~CumRet,
type = 'scatter', mode = 'lines'
,hoverinfo = 'text',
text = ~paste('CumRet : ', CumRet,
'<br /> Date: ', index)
) %>%
layout(title = paste0(input$listID," Cumulative Return"),
xaxis = list(title = ''),
yaxis = list(title = 'Cumulative Return')
)
Ret_DT <- getRet_DT(Select_DT)
##### MACD Strategy =====
# MACD_Fast = 12, MACD_Slow = 26, MACD_Sig = 9
MACD_Signal <- get_MACD_Signal(Select_DT)
Equity_MACD <- getEquity_DT(Ret_DT, MACD_Signal)
JG_Equity_DT_MACD <- get_Equity_All_DT(Select_DT, Ret_DT, MACD_Signal, Equity_MACD)
JG_Equity_DT_MACD
View(JG_Equity_DT_MACD)
setwd("C:/Users/Evan/Desktop/xiqi/Robo_adviser_prototype/trading_strategy_using_R/nice_oop_strategy")
